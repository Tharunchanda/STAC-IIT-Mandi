{% load static tailwind_tags %}
<header id="header" class="fixed top-0 left-0 w-full bg-black shadow-md z-50">
    <div class="container mx-auto flex items-center justify-between py-4 px-6">
        <nav class="flex items-center justify-between w-full">
            <a class="navbar-brand" href="{% url 'home' %}">
                <img src="{% static 'images/STAClogo.png' %}" class="h-12 neon-glow" alt="STAC">
            </a>
            <div class="flex items-center">
                <!-- Toggler button -->
                <button class="navbar-toggler ml-auto p-2 text-neon-green focus:outline-none md:hidden" type="button" aria-controls="navbarDefault" aria-expanded="false" aria-label="Toggle navigation" onclick="toggleNavbar()">
                    <div class="animated-icon flex flex-col space-y-1">
                        <span class="block w-6 h-0.5 bg-neon-green transition-transform duration-300"></span>
                        <span class="block w-6 h-0.5 bg-neon-green transition-transform duration-300"></span>
                        <span class="block w-6 h-0.5 bg-neon-green transition-transform duration-300"></span>
                    </div>
                </button>
                <!-- Navbar menu -->
                <div class="navbar-collapse md:flex items-center hidden" id="navbarDefault">
                    <ul class="navbar-nav flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 ml-auto">
                        {% for item in menu_items %}
                        <li class="nav-item {% if request.path == item.url %}active{% endif %}">
                            <a class="nav-link hover:text-neon-green transition duration-300" href="{% url item.url %}">
                                {{ item.name }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>

<script>
    const menuItems = document.querySelectorAll('.nav-item');
    const toggler = document.querySelector('.navbar-toggler');
    const navbarCollapse = document.getElementById('navbarDefault');

    // Toggle Navbar
    function toggleNavbar() {
        navbarCollapse.classList.toggle('hidden');
        toggler.setAttribute('aria-expanded', !navbarCollapse.classList.contains('hidden'));
        toggler.querySelectorAll('span').forEach((line, index) => {
            line.classList.toggle('rotate-45', index === 0);
            line.classList.toggle('-rotate-45', index === 2);
            if (index === 1) line.classList.toggle('opacity-0');
        });
    }

    // Close navbar when clicking outside
    document.addEventListener('click', function(event) {
        if (!navbarCollapse.contains(event.target) && !toggler.contains(event.target)) {
            navbarCollapse.classList.add('hidden');
            toggler.setAttribute('aria-expanded', false);
            resetTogglerIcon();
        }
    });

    function resetTogglerIcon() {
        toggler.querySelectorAll('span').forEach(line => {
            line.classList.remove('rotate-45', '-rotate-45', 'opacity-0');
        });
    }
</script>
